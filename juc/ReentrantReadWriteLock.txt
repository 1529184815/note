ReentrantReadWriteLock 读写锁
针对读多写少的情况   写锁 共享式 读锁 独占式
读写所允许同一时刻被多个读线程访问，但是在写线程访问时，所有的读线程和其他的写线程都会被阻塞
1. 公平性选择：支持非公平性（默认）和公平的锁获取方式，吞吐量还是非公平优于公平；
2. 重入性：支持重入，读锁获取后能再次获取，写锁获取之后能够再次获取写锁，同时也能够获取读锁；
3. 锁降级：遵循获取写锁，获取读锁再释放写锁的次序，写锁能够降级成为读锁

获取写锁
判断其他线程获取了写锁或者读锁的情况
如果写锁为0 读锁被占用 其他线程获取读锁 写锁获取失败
如果写锁不等于0 读锁未被占用 判断 当前线程是否被独占锁占用 不持有 获取写锁失败 持有当前线程则获取写锁成功
判断有无线程获取写锁 无则当前线程获取写锁
当读锁已经被读线程获取或者写锁已经被其他写线程获取，则写锁获取失败；否则，获取成功并支持重入，增加写状态

释放写锁
同步状态减去写状态
当前写状态是否为0，为0则释放写锁

获取读锁
非独占式锁
其他线程写锁被获取 读锁获取失败
否则获取成功

释放读锁

锁降级
遵循按照获取写锁，获取读锁再释放写锁的次序，写锁能够降级成为读锁










读-读能共存，
读-写不能共存，
写-写不能共存
